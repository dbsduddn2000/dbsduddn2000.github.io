{% if include.tags %}
  {% assign tags = include.tags
    | object_items
    | join: ","
    | downcase
    | split: ","
    | array_filter
    | join: ","
    | regex_replace: "\s+", "-"
    | split: ","
    | uniq
  %}
{% else %}
  {% assign raw_tags = site.data.projects | map: "tags" | join: "," %}
  {% assign tags = raw_tags
    | downcase
    | split: ","
    | array_filter
    | join: ","
    | regex_replace: "\s+", "-"
    | split: ","
    | uniq
  %}
{% endif %}

{% assign link = include.link | default: page.dir %}

{% if tags.size > 0 or include.repo %}
  <div
    class="tags"
    {% if include.repo %}
      data-repo="{{ include.repo | xml_escape }}"
    {% endif %}
    {% if link %}
      data-link="{{ link | relative_url | xml_escape }}"
    {% endif %}
  >
    {% for tag in tags %}
      <a
        href="{{ link }}?search=&quot;tag: {{ tag }}&quot;"
        class="tag"
        data-tooltip="Show items with the tag &quot;{{ tag }}&quot;"
      >
        {{ tag }}
      </a>
    {% endfor %}
  </div>
{% endif %}
